module: ios_snmp_server
short_description: snmp_server resource module
description:
- This module provides declarative management of snmp server on Cisco IOS devices.
version_added: 2.5.0
author:
- Sagar Paul (@KB-perByte)
notes:
- Tested against Cisco IOSv Version 15.6.
- This module works with connection C(network_cli).
options:
  running_config:
    description:
    - This option is used only with state I(parsed).
    - The value of this option should be the output received from the IOS device
      by executing the command B(show running-config | include snmp-server).
    - The state I(parsed) reads the configuration from C(running_config) option and
      transforms it into Ansible structured data as per the resource module's argspec
      and the value is then returned in the I(parsed) key within the result.
    type: str
  state:
    description:
    - The state the configuration should be left in.
    - Refer to examples for more details.
    type: str
    choices:
    - merged
    - replaced
    - overridden
    - deleted
    - parsed
    - gathered
    - rendered
    default: merged
  config:
    description: A dictionary of ntp options
    type: dict
    suboptions:
      accounting:
        description: SNMP Accounting parameters
        type: dict
        suboptions:
          command:
            description: For SNMP set commands
            type: str
          command_default:
            description: Use the default accounting list
            type: bool
          disable_community:
            description: Disable accounting for a particular community
            type: str
          disable_user:
            description: Disable accounting for a particular user
            type: str
      cache:
        description: Enable SNMP cache
        type: int
      chassis_id:
        description: String to uniquely identify this chassis (Hexadecimal)
        type: str
      communities:
        description: Community name configuration.
        type: list
        elements: dict
        suboptions:
          name:
            description: Community name (default RO)
            type: str
          acl_v4:
            description: standard access-list name
            type: str
          acl_v6:
            description: IPv6 access list name
            type: str
          ro:
            description: Only reads are permitted
            type: bool
          rw:
            description: Read-write access
            type: bool
          view:
            description: MIB view name
            type: str
      contact:
        description: Text for mib object sysContact
        type: str
      context:
        description: Create/Delete a context apart from default
        type: list
        elements: str
      dbal:
        description: snmp database access layer
        type: dict
        suboptions:
          cache:
            description: snmp dbal cache
            type: bool
          timeout:
            description: snmp dbal cache timeout
            type: int
      drop:
        description: Silently drop SNMP packets
        type: dict
        suboptions:
          unknown_user:
            description: Silently drop unknown v3 user packets
            type: bool
          vrf_traffic:
            description: Silently drop SNMP packets that come on VRF interfaces
            type: bool
      traps:
        description: Enable SNMP Traps
        type: dict
        suboptions:
          aaa_server:
            description: Enable SNMP AAA Server traps
            type: bool
          adslline:
            description: Enable ADSL Line-MIB traps
            type: bool
          entity_sensor:
            description: Enable SNMP ENTITY-SENSOR-MIB traps
            type: bool
          entity_state:
            description: Enable SNMP ENTITY-STATE-MIB traps
            type: bool
          config:
            description: Enable SNMP config traps
            type: bool
          config_copy:
            description: Enable SNMP config copy traps
            type: bool
          casa:
            description: Enable SNMP config casa traps
            type: bool
          config_ctid:
            description: Enable SNMP config ctid traps
            type: bool
          dhcp:
            description: Enable SNMP dhcp traps
            type: bool
          ipsla:
            description: Enable SNMP ipsla traps
            type: bool
          msdp:
            description: Enable SNMP msdp traps
            type: bool
          hsrp:
            description: Enable SNMP hsrp traps
            type: bool
          fru_ctrl:
            description: Enable SNMP fru-ctrl traps
            type: bool
          flowmon:
            description: Enable SNMP flowmon traps
            type: bool
          event_manager:
            description: Enable SNMP event-manager traps
            type: bool
          entity:
            description: Enable SNMP entity traps
            type: bool
          eigrp:
            description: Enable SNMP eigrp traps
            type: bool
          pki:
            description: Enable SNMP pki traps
            type: bool
          tty:
            description: Enable SNMP tty TCP connection traps
            type: bool
          vrrp:
            description: Enable SNMP vrrp traps
            type: bool
          lte:
            description: Enable SNMP LTE traps
            type: bool
          rsvp:
            description: Enable SNMP RSVP traps
            type: bool
          syslog:
            description: Enable SNMP syslog traps
            type: bool
          cnpd:
            description: Enable SNMP cnpd traps
            type: bool
          mvpn:
            description: Enable SNMP mvpn traps
            type: bool
          transceiver_all:
            description: Enable SNMP transceiver traps
            type: bool
          ip_local_pool:
            description: Enable SNMP ip local pool traps
            type: bool
          ipmulticast:
            description: Enable SNMP ipmulticastl traps
            type: bool
          ether_oam:
            description: Enable SNMP ip local pool traps
            type: bool
          alarms:
            description: Enable SNMP alarms traps
            type: str
            choices: ['critical','informational','major','minor']
          auth_framework:
            description: Enable SNMP CISCO-AUTH-FRAMEWORK-MIB traps
            type: dict
            suboptions:
              state:
                description: Enable/disable auth framework
                type: str
                choices: ['enable','disable']
              sec_violation:
                description: Mode sec_violation
                type: bool
          ospf:
            description: Allow ospf related traps
            type: dict
            suboptions:
              state:
                description: Enable/disable ospf traps
                type: str
                choices: ['enable','disable']
              state_change:
                description: Enable/disable state change traps
                type: bool
              error:
                description: Enable error traps
                type: dict
                suboptions:
                  authentication_failure:
                    description: Authentication failure on non-virtual interfaces
                    type: bool
                  bad_packet:
                    description: Packet parse failure on non-virtual interfaces
                    type: bool
                  config_error:
                    description: Config mismatch errors on non-virtual interfaces
                    type: bool
                  virt_authentication_failure:
                    description: Authentication failure on virtual interfaces
                    type: bool
                  virt_bad_packet:
                    description: Packet parse failure on virtual interfaces
                    type: bool
                  virt_config_error:
                    description: Config mismatch errors on virtual interfaces
                    type: bool
              cisco_specific:
                description: Cisco specific traps
                type: dict
                suboptions:
                  error:
                    description: error traps
                    type: dict
                    suboptions:
                      config_error:
                        description: Config mismatch errors on non-virtual interfaces
                        type: bool
                      shamlink:
                        description: Config errors on sham link interfaces
                        type: bool
                      virt_config_error:
                        description: Config mismatch errors on virtual interface
                        type: bool
                  lsa:
                    description: Lsa related traps
                    type: dict
                    suboptions:
                      lsa-maxage:
                        description: Lsa aged to maxage
                        type: bool
                      lsa-originate:
                        description: New lsa originated
                        type: bool
                  retransmit:
                    description: Packet retransmit traps
                    type: dict
                    suboptions:
                      packets:
                        description: Packet retransmission on non-virtual interfaces
                        type: bool
                      shamlink:
                        description: Packet retransmission on sham link interfaces
                        type: bool
                      virt_packets:
                        description: Packet retransmission on virtual interfaces
                        type: bool
                  state_change:
                    description: state change traps
                    type: dict
                    suboptions:
                      nssa_trans_change:
                        description: Nssa translator state changes
                        type: bool
                      shamlink:
                        description: Config mismatch errors on virtual interfaces
                        type: dict
                        suboptions:
                          interface:
                            description: Sham link interface state changes
                            type: bool
                          neighbor:
                            description: Sham link neighbor state changes
                            type: bool
          cpu:
            description: Allow CPU related traps
            type: dict
            suboptions:
              state:
                description: Enable/disable cpu traps
                type: str
                choices: ['enable','disable']
              threshold:
                description: Mode threshold
                type: bool
          pim:
            description: Allow PIM traps
            type: dict
            suboptions:
              state:
                description: Enable/disable PIM traps
                type: str
                choices: ['enable','disable']
              invalid_pim_message:
                description: Enable invalid pim message trap
                type: bool
              neighbor_change:
                description: Enable neighbor change trap
                type: bool
              rp_mapping_change:
                description: Enable rp mapping change trap
                type: bool
          ike:
            description: Allow ike traps
            type: dict
            suboptions:
              policy:
                description: Enable IKE Policy traps
                type: dict
                suboptions:
                  add:
                    description: Enable IKE Policy add trap
                    type: bool
                  delete:
                    description: Enable IKE Policy delete trap
                    type: bool
              tunnel:
                description: Enable IKE Tunnel traps
                type: dict
                suboptions:
                  start:
                    description: Enable IKE Tunnel start trap
                    type: bool
                  stop:
                    description: Enable IKE Tunnel stop trap
                    type: bool
          ipsec:
            description: Allow ike traps
            type: dict
            suboptions:
              cryptomap:
                description: Enable IPsec Cryptomap traps
                type: dict
                suboptions:
                  add:
                    description: Enable IPsec Cryptomap add trap
                    type: bool
                  attach:
                    description: Enable IPsec Cryptomap Attach trap
                    type: bool
                  delete:
                    description: Enable IPsec Cryptomap delete trap
                    type: bool
                  detach:
                    description: Enable IPsec Cryptomap Detach trap
                    type: bool
              too_many_sas:
                description: Enable IPsec Tunnel Start trap
                type: bool
              tunnel:
                description: Enable IPsec Tunnel traps
                type: dict
                suboptions:
                  start:
                    description: Enable IPsec Tunnel start trap
                    type: bool
                  stop:
                    description: Enable IPsec Tunnel stop trap
                    type: bool
          bgp:
            description: Allow bgp traps
            type: dict
            suboptions:
              state:
                description: Enable/disable bgp traps
                type: str
                choices: ['enable','disable']
              cbgp2:
                description: Enable BGP MIBv2 traps
                type: bool
              state_changes:
                description: Traps for FSM state changes
                type: dict
                suboptions:
                  state:
                    description: Enable/disable bgp state_changes traps
                    type: str
                    choices: ['enable','disable']
                  all:
                    description: CISCO specific trap for all fsm state changes
                    type: bool
                  backward-trans:
                    description: CISCO specific trap for backward transition
                    type: bool
                  limited:
                    description: Trap for standard backward transition and established
                    type: bool
              threshold:
                description: Mode threshold
                type: dict
                suboptions:
                  state:
                    description: Enable/disable bgp threshold traps
                    type: str
                    choices: ['enable','disable']
                  prefix:
                    description: Enable/disable bgp threshold traps
                    type: bool
          bridge:
            description: Allow bridge related traps
            type: dict
            suboptions:
              state:
                description: Enable/disable bridge traps
                type: str
                choices: ['enable','disable']
              newroot:
                description: Enable SNMP STP Bridge MIB newroot traps
                type: bool
              topologychange:
                description: Enable SNMP STP Bridge MIB topologychange traps
                type: bool
          cef:
            description: Allow cef related traps
            type: dict
            suboptions:
              state:
                description: Enable/disable cef traps
                type: str
                choices: ['enable','disable']
              inconsistency:
                description: Enable SNMP CEF Inconsistency traps
                type: bool
              peer_fib_state_change:
                description: Enable SNMP CEF Peer FIB State change traps
                type: bool
              peer_state_change:
                description: Enable SNMP CEF Peer state change traps
                type: bool
              resource_failure:
                description: Enable SNMP CEF Resource Failure traps
                type: bool
          dlsw:
            description: Allow dlsw related traps
            type: dict
            suboptions:
              state:
                description: Enable/disable cef traps
                type: str
                choices: ['enable','disable']
              circuit:
                description: Enable SNMP dlsw circuit traps
                type: bool
              tconn:
                description: Enable SNMP dlsw peer transport connection traps
                type: bool
          frame_relay:
            description: Allow frame-relay traps
            type: dict
            suboptions:
              state:
                description: Enable/disable frame-relay traps
                type: str
                choices: ['enable','disable']
              subif:
                description: Enable SNMP frame-relay subinterface traps
                type: dict
                suboptions:
                  state:
                    description: Enable/disable subif traps
                    type: str
                    choices: ['enable','disable']
                  count:
                    description: Maximum number of traps sent per interval
                    type: int
                  interval:
                    description: Interval duration in which to limit the number of traps sent
                    type: int
          energywise:
            description: Allow energywise related traps
            type: dict
            suboptions:
              state:
                description: Enable/disable  traps
                type: str
                choices: ['enable','disable']
              event_occured:
                description: Enable ENERGYWISE event occur trap
                type: bool
              level_change:
                description: Enable ENERGYWISE entity level change trap
                type: bool
              neighbor_added:
                description: Enable ENERGYWISE entity neighbor added trap
                type: bool
              neighbor_deleted:
                description: Enable ENERGYWISE entity neighbor deleted trap
                type: bool
          ethernet:
            description: Allow ethernet traps
            type: dict
            suboptions:
              cfm:
                description: Enable SNMP Ethernet CFM traps
                type: dict
                suboptions:
                  alarm:
                    description: Enable SNMP Ethernet CFM fault alarm trap
                    type: bool
                  cc:
                    description: Enable SNMP Ethernet CC traps
                    type: dict
                    suboptions:
                      config:
                        description: Enable SNMP Ethernet CFM configuration error traps
                        type: bool
                      cross_connect :
                        description: Enable SNMP Ethernet CFM cross-connect traps
                        type: bool
                      loop:
                        description: Enable SNMP Ethernet CFM loop traps
                        type: bool
                      mep_down:
                        description: Enable SNMP Ethernet CFM CC Down traps
                        type: bool
                      mep_up:
                        description: Enable SNMP Ethernet CFM CC Up traps
                        type: bool
                  crosscheck:
                    description: Enable SNMP Ethernet CC crosscheck traps
                    type: dict
                    suboptions:
                      mep-missing:
                        description: Enable SNMP Ethernet CFM CC crosscheck missing traps
                        type: bool
                      mep-unknown:
                        description: Enable SNMP Ethernet CFM CC crosscheck unknown traps
                        type: bool
                      service-up:
                        description:  Enable SNMP Ethernet CFM CC crosscheck service traps
                        type: bool
              evc:
                description: Enable SNMP Ethernet EVC traps
                type: dict
                suboptions:
                  create:
                    description: Enable SNMP Ethernet EVC create traps
                    type: bool
                  delete:
                    description: Enable SNMP Ethernet EVC delete traps
                    type: bool
                  status:
                    description: Enable SNMP Ethernet EVC status traps
                    type: bool
          bfd:
            description: Allow SNMP BFD traps
            type: dict
            suboptions:
              session_down:
                description: Enable BFD session down traps
                type: bool
              session_up:
                description: Enable BFD session up traps
                type: bool
          l2tun:
            description: Allow SNMP l2tun traps
            type: dict
            suboptions:
              pseudowire_status:
                description: Enable BFD pseudowire status traps
                type: bool
              session:
                description: Enable BFD session traps
                type: bool
          snmp:
            description: Enable SNMP traps
            type: dict
            suboptions:
              authentication:
                description: Enable authentication trap
                type: bool
              coldstart:
                description: Enable coldStart trap
                type: bool
              linkdown:
                description: Enable linkDown trap
                type: bool
              linkup:
                description: Enable linkUp trap
                type: bool
              warmstart:
                description: Enable warmStart trap
                type: bool
      engine_id:
        description: Configure a local or remote SNMPv3 engineID
        type: dict
        suboptions:
          local:
            description:  Local SNMP agent
            type: str
          remote:
            description: Remote SNMP agent
            type: dict
            suboptions:
              host:
                description: Hostname or IP address of remote SNMP notification host
                type: str
              udp_port:
                description: The remote SNMP notification host's UDP port number.
                type: int
              id:
                description: engine ID octet string
                type: str
              vrf:
                description: The remote notification host's VPN routing instance
                type: str
      file_transfer:
        description: File transfer related commands
        type: dict
        suboptions:
          access_group:
            description: Access control for file transfers
            type: str
      groups:
        description: Define a User Security Model group
        type: list
        elements: dict
        suboptions:
          group:
            description: SNMP group for the user
            type: str
          version:
            description: snmp security group version
            type: str
            choices: ['v1', 'v3', 'v2c']
          context:
            description: Specify a context to associate with the group
            type: str
          notify:
            description: View to restrict notifications
            type: str
          read:
            description: View to restrict read access
            type: str
          write:
            description: View to restrict write access
            type: str
      hosts:
        description: Specify hosts to receive SNMP notifications
        type: list
        elements: dict
        suboptions:
          host:
            description: Hostname or IP address of SNMP notification host.
            type: str
          informs:
            description: Use SNMP inform messages.
            type: bool
          traps:
            description: Use SNMP trap messages
            type: bool
          version:
            description: Notification message SNMP version.
            type: str
            choices: ['1', '2c', '3']
          vrf:
            description: Specify the VRF in which the host is configured
            type: str
      if_index:
        description: Enable ifindex persistence
        type: bool
      inform:
        description: Configure SNMP Informs options
        type: dict
        suboptions:
          pending:
            description: Set number of unacked informs to hold
            type: int
          retries:
            description: Set retry count for informs
            type: int
          timeout:
            description: Set timeout for informs
            type: int
      ip:
        description: IP ToS configuration for SNMP traffic
        type: dict
        suboptions:
          dscp:
            description: IP DSCP value for SNMP traffic
            type: int
          precedence:
            description: IP Precedence value for SNMP traffic
            type: int
      location:
        description: Text for mib object sysLocation
        type: str
      manager:
        description: Modify SNMP manager parameters
        type: int
      packet_size:
        description: Largest SNMP packet size
        type: int
      password_policy:
        description: SNMP v3 users password policy
        type: list
        elements: dict
        suboptions:
          policy_name:
            description: Name of the policy
            type: str
          username:
            description: Name of the user
            type: str
          change:
            description: Number of Character changes b/w old and new password
            type: int
          digits:
            description: Number of digits
            type: int
          lower_case:
            description: Number of lower-case characters
            type: int
          max_len:
            description: Maximum password length
            type: int
          min_len:
            description: Minimum password length
            type: int
          special_char:
            description: Number of special case character
            type: int
          upper_case:
            description: Number of upper-case characters
            type: int
      queue_length:
        description: Message queue length for each TRAP host
        type: int
      system_shutdown:
        description: Enable use of the SNMP reload command
        type: bool
      tftp_server:
        description: Limit TFTP servers used via SNMP
        type: str
      trap_retry:
        description: SNMP trap options, number of retries for searching route
        type: int
      trap_timestamp:
        description: SNMP trap options, add timestamp to trap var binds
        type: bool
      trap_link:
        description: SNMP trap options, Assign/Enable SNMP link traps
        type: str
        choices: ['ietf', 'switchover']
      trap_authentication:
        description: SNMP trap options, fine-tune enable/disable of authentication traps
        type: str
        choices: ['acl-failure', 'unknown-context', 'vrf']
      trap_source:
        description: Assign an interface for the source address of all traps
        type: str
      trap_timeout:
        description: Set timeout for TRAP message retransmissions
        type: int
      user:
        description: Define a user who can access the SNMP engine
        type: list
        elements: dict
        suboptions:
          user:
            description: SNMP user name
            type: str
          group:
            description: SNMP group for the user.
            type: str
          remote:
            description: System where an SNMPv3 user is hosted
            type: str
          udp_port:
            description: UDP port used by the remote SNMP system
            type: int
          version:
            description: SNMP security version
            type: str
            choices: ['v1', 'v2c', 'v3']
          vrf:
            description: The remote SNMP entity's VPN Routing instance
            type: str
          access:
            description: Access list associated
            type: str
      view:
        description: Define an SNMPv2 MIB view
        type: list
        elements: dict
        suboptions:
          name:
            description: Name of the view
            type: str
          family_name:
            description: MIB view family name
            type: str
          excluded:
            description: MIB family is excluded from the view
            type: bool
          included:
            description: MIB family is included in the view
            type: bool