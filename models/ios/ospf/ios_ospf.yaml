---
ANSIBLE_METADATA: |
    {
      'metadata_version': '1.1',
      'status': ['preview'],
      'supported_by': 'network'
    }

DOCUMENTATION: |
module: ios_ospfv2
version_added: 2.10
short_description: Manages and configures Open Shortest Path First (OSPF) version 2 and it's attributes.
description: This module configures and manages the Open Shortest Path First (OSPF) version 2 on IOS platforms.
author: Sumit Jaiswal (@justjais)
notes:
  - Tested against Cisco IOSv Version 15.2 on VIRL
  - This module works with connection C(network_cli).
    See L(IOS Platform Options,../network/user_guide/platform_ios.html).
options:
  config:
    description: A dictionary of OSPF options.
    type: list
    elements: dict
    suboptions:
      ospf_processes:
        description:
          - List of OSPF instance configurations.
        type: list
        elements: dict
        suboptions:
          id:
            type: int
            description: Process ID
            required: true
          vrf:
            description: Specify parameters for a VPN Routing/Forwarding instance
            type: str
          ospf_params:
            description:
              - Specify the OSPF configuration parameters under appropriate context..
            type: list
            elements: dict
            suboptions:
              address_family:
                description: Router Address Family configuration mode
                element: dict
                suboptions:
                  default:
                    description: Set a command to its defaults
                    type: bool
                  help:
                    description: Description of the interactive help system
                    type: bool
                  snmp_context:
                    description:
                      - Modify snmp parameters
                      - Configure SNMP context name
                    type: str
                  topology:
                    description: Associate the routing protocol to a topology instance
                    type: dict
                    suboptions:
                      name:
                        description: Routing topology instance name
                        type: str
                      base:
                        description: Entering router topology sub mode
                        type: bool
              adjacency:
                description: To configure control adjacency formation
                type: dict
                suboptions:
                  min_adjacency:
                    description:
                      - Initial number of adjacencies allowed to be forming in an area
                      - Please refer vendor documentation for valid values
                    type: int limit or minimum adjacencies forming in area
                  max_adjacency:
                    description:
                      - Maximum number of adjacencies allowed to be forming
                      - Please refer vendor documentation for valid values
                    type: int
                  none:
                    description: No initial
                    type: bool
              area:
                description: OSPF area parameters
                type: list
                elements: dict
                suboptions:
                  area_id:
                    description:
                      - OSPF area ID as a decimal value. Please refer vendor documentation
                        of Valid values.
                      - OSPF area ID in IP address format(e.g. A.B.C.D)
                    type: str
                  authentication:
                    description:
                      - Enable authentication
                    type: dict
                    suboptions:
                      message-digest:
                        description: Use IPsec authentication
                        type: bool
                  capability:
                    description:
                      - Enable area specific capability
                      - Enable exclusion of links from base topology
                    type: bool
                  default_cost:
                    description:
                      - Set the summary default-cost of a NSSA/stub area
                      - Stub's advertised external route metric
                      - Note, please refer vendor documentation for respective valid values
                    type: int
                  filter_list:
                    description: Filter networks between OSPF areas
                    type: dict
                    suboptions:
                      name:
                        description: Name of an IP prefix-list
                        type: str
                      in:
                        description: Filter networks sent to this area
                        type: bool
                      out:
                        description: Filter networks sent from this area
                        type: bool
                  nssa:
                    description: Specify a NSSA area
                    type: dict
                    suboptions:
                      default_information_originate:
                        description: Originate Type 7 default into NSSA area
                        type: dict
                        suboptions:
                          metric:
                            description:
                              - OSPF default metric
                            type: int
                          metric_type:
                            description:
                              - OSPF metric type for default routes
                              - OSPF Link State type
                            type: int
                            choices: [1, 2]
                      no_redistribution:
                        description: No redistribution into this NSSA area
                        type: bool
                      no_summary:
                        description: Do not send summary LSA into NSSA
                        type: bool
                      translate:
                        description:
                          - Translate LSA
                          - Always translate LSAs on this ABR
                          - Suppress forwarding address in translated LSAs
                        type: str
                        choices: ['always', 'suppress-fa']
                  range:
                    description: Summarize routes matching address/mask (border routers only)
                    type: dict
                    suboptions:
                      address:
                        description: IP address to match
                        type: str
                      netmask:
                        description: IP mask for address
                        type: str
                      advertise:
                        description: Advertise this range (default)
                        type: bool
                      cost:
                        description: User specified metric for this range
                        type: int
                      not_advertise:
                        description: DoNotAdvertise this range
                        type: bool
                  sham_link:
                    description: Define a sham link and its parameters
                    type: dict
                    suboptions:
                      source:
                        description: IP addr associated with sham-link source (A.B.C.D)
                        type: str
                      destination:
                        description: IP addr associated with sham-link destination (A.B.C.D)
                        type: str
                      cost:
                        description:
                          - Associate a cost with the sham-link
                          - Cost of the sham-link
                          - Note, please refer vendor documentation for respective valid values
                        type: int
                      ttl_security:
                        description:
                          - TTL security check
                          - Maximum number of IP hops allowed
                        type: int
                  stub:
                    description:
                      - Specify a stub area
                      - Backbone can not be configured as stub area
                    type: dict
                    suboptions:
                      no_ext_capability:
                        description: Do not send domain specific capabilities into stub area
                        type: bool
                      no_summary:
                        description: Do not send summary LSA into stub area
                        type: bool
              auto_cost:
                description: Calculate OSPF interface cost according to bandwidth
                type: dict
                suboptions:
                  reference_bandwidth:
                    description:
                      - Use reference bandwidth method to assign OSPF cost
                      - Note, refer vendor documentation for respective valid values
                    type: int
              bfd:
                description:
                  - BFD configuration commands
                  - Enable BFD on all interfaces
                type: bool
              capability:
                description: Enable specific OSPF feature
                type: dict
                suboptions:
                  lls:
                    description: Link-local Signaling (LLS) support
                    type: bool
                  opaque:
                    description: Opaque LSA
                    type: bool
                  transit:
                    description: Transit Area
                    type: bool
              compatible:
                description: OSPF router compatibility list
                type: dict
                suboptions:
                  rfc1583:
                    description: compatible with RFC 1583
                    type: bool
                  rfc1587:
                    description: compatible with RFC 1587
                    type: bool
                  rfc5243:
                    description: supports DBD exchange optimization
                    type: bool
              default:
                description: Set a command to its defaults
                type: bool
              default_information:
                description: Control distribution of default information
                type: dict
                suboptions:
                  originate:
                    description: Distribute a default route
                    type: bool
                  always:
                    description: Always advertise default route
                    type: bool
                  metric:
                    description:
                      - OSPF default metric
                      - Note, refer vendor documentation for respective valid values
                    type: int
                  metric_type:
                    description:
                      - OSPF metric type for default routes
                      - Note, please refer vendor documentation for respective valid range
                    type: int
                  route_map:
                    description: Route-map reference name
                    type: str
              default_metric:
                description: Set metric of redistributed routes
                type: int
              discard_route:
                description: Enable or disable discard-route installation
                type: dict
                suboptions:
                  external:
                    description:
                      - Discard route for redistributed summarised routes
                      - Administrative distance for redistributed summarised routes
                      - Note, please refer vendor documentation for respective valid range
                    type: int
                  internal:
                    description:
                      - Discard route for summarised internal routes
                      - Administrative distance for summarised internal routes
                      - Note, please refer vendor documentation for respective valid range
                    type: int
              distance:
                description: Define an administrative distance
                type: dict
                suboptions:
                  admin_distance:
                    description: OSPF distance
                    type: dict
                    suboptions:
                    description:
                      - Administrative distance
                      - Note, please refer vendor documentation for respective valid range
                    type: int
                  address:
                    description: IP Source address
                    type: str
                  wildcard_bits:
                    description: Wildcard bits
                    type: str
                  acl:
                    description: Access-list name/number
                    type: str
                  ospf:
                    description: OSPF distance
                    type: dict
                    suboptions:
                      external:
                        description: External type 5 and type 7 routes
                        type: int
                      inter_area:
                        description: Inter-area routes
                        type: int
                      intra_area:
                        description: Intra-area routes
                        type: int
              distribute_list:
                description: Filter networks in routing updates
                type: dict
                suboptions:
                  acl:
                    description: IP access list
                    type: dict
                    suboptions:
                      name:
                        description: IP access list name/number
                        type: str
                      in:
                        description: Filter incoming routing updates
                        type: str
                      out:
                        description: Filter outgoing routing updates
                        type: str
              domain_id:
                description: OSPF domain-id
                type: dict
                suboptions:
                  ip_address:
                    description: IP address
                    type: dict
                    suboptions:
                      address:
                        description: OSPF domain ID in IP address format
                        type: str
                      secondary:
                        description: Secondary Domain-ID
                        type: bool
                  null:
                    description: Null Domain-ID
                    type: str
              domain_tag:
                description:
                  - OSPF domain-tag which is OSPF domain tag - 32-bit value
                  - Note, please refer vendor documentation for respective valid range
                type: int
            event_log:
              description: Event Logging
              type: dict
              suboptions:
                enable:
                  description: Enable event Logging
                  type: bool
                one_shot:
                  description: Disable Logging When Log Buffer Becomes Full
                  type: bool
                pause:
                  description: Pause Event Logging
                  type: bool
                size:
                  description:
                    - Maximum Number of Events Stored in the Event Log
                    - Note, refer vendor documentation for respective valid values
                  type: int
              help:
                description: Description of the interactive help system
                type: bool
              ignore:
                description:
                  - Do not complain about specific event
                  - Do not complain upon receiving LSA of the specified type, MOSPF Type 6 LSA
                type: bool
              interface_id:
                description:
                  - Source of the interface ID
                  - SNMP MIB ifIndex
                type: bool
              ispf:
                description: Enable incremental SPF computation
                type: bool
              limit:
                description: Limit a specific OSPF feature and LS update, DBD, and LS request retransmissions
                type: dict
                suboptions:
                  dc:
                    description: Demand circuit retransmissions
                    type: dict
                    suboptions:
                      number:
                        description: The maximum number of retransmissions
                        type: int
                      disable:
                        description: Disble the feature
                        type: bool
                  non_dc:
                    description: Non-demand-circuit retransmissions
                    type: dict
                    suboptions:
                      number:
                        description: The maximum number of retransmissions
                        type: int
                      disable:
                        description: Disble the feature
                        type: bool
              local_rib_criteria:
                description: Enable or disable usage of local RIB as route criteria
                type: dict
                suboptions:
                  enable:
                    description: Enable usage of local RIB as route criteria
                    type: bool
                  forwarding_address:
                    description: Local RIB used to validate external/NSSA forwarding addresses
                    type: bool
                  inter_area_summary:
                    description: Local RIB used as criteria for inter-area summaries
                    type: bool
                  nssa_translation:
                    description: Local RIB used as criteria for NSSA translation
                    type: bool
              log_adjacency_changes:
                description: Log changes in adjacency state
                type: dict
                suboptions:
                  set:
                    description: Log changes in adjacency state
                    type: bool
                  detail:
                    description: Log all state changes
                    type: bool
              max_lsa:
                description: Maximum number of non self-generated LSAs to accept
                type: dict
                suboptions:
                  number:
                    description:
                      - Maximum number of non self-generated LSAs to accept
                      - Note, refer vendor documentation for respective valid values
                    type: int
                  threshold_value:
                    description:
                      - Threshold value (%) at which to generate a warning msg
                      - Note, refer vendor documentation for respective valid values
                    type: int
                  ignore_count:
                    description:
                      - Maximum number of times adjacencies can be suppressed
                      - Note, refer vendor documentation for respective valid values
                    type: int
                  ignore_time:
                    description:
                      - Number of minutes during which all adjacencies are suppressed
                      - Note, refer vendor documentation for respective valid values
                    type: int
                  reset_time:
                    description:
                      - Number of minutes after which ignore-count is reset to zero
                      - Note, refer vendor documentation for respective valid values
                    type: int
                  warning_only:
                    description: Only give a warning message when limit is exceeded
                    type: bool
              max_metric:
                description: Set maximum metric
                type: dict
                suboptions:
                  router_lsa:
                    description: Maximum metric in self-originated router-LSAs
                    type: bool
                  external_lsa:
                    description:
                      - Override external-lsa metric with max-metric value
                      - Overriding metric in external-LSAs
                      - Note, refer vendor documentation for respective valid values
                    type: int
                  inter_area_lsas:
                    description:
                      - Override inter-area-lsas metric with max-metric value
                      - Overriding metric in inter-area-LSAs
                      - Note, refer vendor documentation for respective valid values
                    type: int
                  on_startup:
                    description: Set maximum metric temporarily after reboot
                    type: dict
                    suboptions:
                      time:
                        description:
                          - Time, in seconds, router-LSAs are originated with max-metric
                          - Note, please refer vendor documentation for respective valid range
                        type: int
                      wait_for_bgp:
                        description: Let BGP decide when to originate router-LSA with normal metric
                        type: bool
                  stub_prefix_lsa:
                    description: Set maximum metric for stub links in prefix LSAs
                    type: bool
              maximum-paths:
                description:
                  - Forward packets over multiple paths
                  - Number of paths
                type: int
              mpls:
                description: Configure MPLS routing protocol parameters
                type: dict
                suboptions:
                  ldp:
                    description: routing protocol commands for MPLS LDP
                    type: dict
                    suboptions:
                      autoconfig:
                        description: routing protocol commands for MPLS LDP
                        type: dict
                        suboptions:
                          set:
                            description: Configure LDP automatic configuration and set the config
                            type: bool
                          area:
                            description: Configure an OSPF area to run MPLS LDP
                            type: str
                      sync:
                        description: Configure LDP-IGP Synchronization
                        type: bool
                  traffic_eng:
                    description: Let BGP decide when to originate router-LSA with normal metric
                    type: dict
                    suboptions:
                      area:
                        description:
                          - Configure an ospf area to run MPLS Traffic Engineering
                          - OSPF area ID as a decimal value or in IP address format
                        type: str
                      autoroute_exclude:
                        description:
                          - MPLS TE autoroute exclude
                          - Filter prefixes based on name of an IP prefix-list
                        type: str
                      interface:
                        description: MPLS TE interface configuration for this OSPF process
                        type: str
                      mesh_group:
                        description: Traffic Engineering Mesh-Group advertisement
                        type: dict
                        suboptions:
                          id:
                            description: Mesh Group Id
                            type: int
                          interface:
                            description: Interface configuration
                            type: str
                      multicast_intact:
                        description: MPLS TE and PIM interaction
                        type: bool
                      router_id:
                        description: Interface configuration
                        type: str
              neighbor:
                description: Specify a neighbor router
                type: dict
                suboptions:
                  address:
                    description: Neighbor address (A.B.C.D)
                    type: str
                  cost:
                    description:
                      - OSPF cost for point-to-multipoint neighbor metric
                      - Note, please refer vendor documentation for respective valid range
                    type: int
                  database_filter:
                    description:
                      - Filter OSPF LSA during synchronization and flooding for point-to-multipoint neighbor
                      - Filter all outgoing LSA
                    type: bool
                  poll_interval:
                    description: OSPF dead-router polling interval of non-broadcast neighbor in Seconds
                    type: int
                  priority:
                    description: OSPF priority of non-broadcast neighbor priority
                    type: int
              network:
                description: Enable routing on an IP network
                type: dict
                suboptions:
                  address:
                    description: Network number
                    type: str
                  wildcard_bits:
                    description: OSPF wild card bits
                    type: str
                  area:
                    description: Set the OSPF area ID
                    type: str
              nsf:
                description: Non-stop forwarding
                type: dict
                suboptions:
                  cisco:
                    description: Cisco Non-stop forwarding
                    type: dict
                    suboptions:
                      helper:
                        description: helper support
                        type: bool
                      disable:
                        description: disable helper support
                        type: bool
                  ietf:
                    description: IETF graceful restart
                    type: dict
                    suboptions:
                      helper:
                        description: helper support
                        type: bool
                      disable:
                        description: disable helper support
                        type: bool
                      strict_lsa_checking:
                        description: enable helper strict LSA checking
                        type: bool
              passive_interface:
                description:
                  - Suppress routing updates on an interface
                  - Interface name with respective interface number
                type: dict
              prefix_suppression:
                description: Enable prefix suppression
                type: bool
              priority:
                description:
                  - OSPF topology priority
                  - Note, refer vendor documentation for respective valid values
                type: int
              queue_depth:
                description: Hello/Router process queue depth
                type: dict
                suboptions:
                  hello:
                    description: OSPF Hello process queue depth
                    type: dict
                    suboptions:
                      max_packets:
                        description: maximum number of packets in the queue
                        type: int
                      unlimited:
                        description: Unlimited queue depth
                        type: bool
                  update:
                    description: OSPF Router process queue depth
                    type: dict
                    suboptions:
                      max_packets:
                        description: maximum number of packets in the queue
                        type: int
                      unlimited:
                        description: Unlimited queue depth
                        type: bool
              router_id:
                description:
                  - Router-id address for this OSPF process
                  - OSPF router-id in IP address format (A.B.C.D)
                type: str
              shutdown:
                description: Shutdown the router process
                type: bool
              summary_address:
                description: Configure IP address summaries
                type: dict
                suboptions:
                  address:
                    description: IP summary address
                    type: str
                  mask:
                    description: IP Summary mask
                    type: str
                  not_advertise:
                    description: Do not advertise or translate
                    type: bool
                  nssa_only:
                    description: Limit summary to NSSA areas
                    type: bool
                  tag:
                    description: Set tag
                    type: int
              timers:
                description: Adjust routing timers
                type: dict
                suboptions:
                  lsa:
                    description:
                      - OSPF LSA timers, arrival timer
                      - The minimum interval in milliseconds between accepting the same LSA
                      - Note, refer vendor documentation for respective valid values
                    type: int
                  pacing:
                    description: OSPF pacing timers
                    type: dict
                    suboptions:
                      flood:
                        description:
                          - OSPF flood pacing timer
                          - The minimum interval in msec to pace limit flooding on interface
                          - Note, refer vendor documentation for respective valid values
                        type: int
                      lsa_group:
                        description:
                          - OSPF LSA group pacing timer
                          - Interval in sec between group of LSA being refreshed or maxaged
                          - Note, refer vendor documentation for respective valid values
                        type: int
                      retransmission:
                        description:
                          - OSPF retransmission pacing timer
                          - The minimum interval in msec between neighbor retransmissions
                          - Note, refer vendor documentation for respective valid values
                        type: int
                  throttle:
                    description: OSPF throttle timers
                    type: dict
                    suboptions:
                      lsa:
                        description:
                          - OSPF LSA throttle timers
                          - Delay to generate first occurrence of LSA in milliseconds
                          - Note, refer vendor documentation for respective valid values
                        type: int
                      spf:
                        description:
                          - OSPF SPF throttle timers
                          - Delay between receiving a change to SPF calculation in milliseconds
                          - Note, refer vendor documentation for respective valid values
                        type: int
              traffic-share:
                description:
                  - How to compute traffic share over alternate paths
                  - All traffic shared among min metric paths
                  - Use different interfaces for equal-cost paths
                type: bool
              ttl_security:
                description: TTL security check
                type: dict
                suboptions:
                  set:
                    description: Enable TTL Security on all interfaces
                    type: bool
                  hops:
                    description:
                      - Maximum number of IP hops allowed
                      - Note, refer vendor documentation for respective valid values
                    type: int
  state:
    description:
    - The state the configuration should be left in
    type: str
    choices:
    - merged
    - replaced
    - overridden
    - deleted
    - gathered
    - rendered
    - parsed
    default: merged
EXAMPLES:
- deleted_example_01.txt
- merged_example_01.txt
- replaced_example_01.txt
- overridden_example_01.txt
- gathered_example_01.txt
- rendered_example_01.txt
- parsed_example_01.txt
