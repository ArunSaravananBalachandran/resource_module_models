GENERATOR_VERSION: '1.0'
ANSIBLE_METADATA: |
    {
        'metadata_version': '1.1',
        'status': ['preview'],
        'supported_by': 'community'
    }
NETWORK_OS: sonic
RESOURCE: snmp
COPYRIGHT: Copyright 2024 Dell Inc. or its subsidiaries. All Rights Reserved.
DOCUMENTATION: |
    module: sonic_snmp
    version_added: 3.3.1
    short_description: Manage SNMP configuration on SONiC
    description:
      - This module provides configuration management of SNMP for devices running SONiC
    author: Aida Shumburo (@aida-shumburo)
    options:
      config:
        description:
          - SNMP configuration
        type: dict
        suboptions:
          targets:
            description:
              - List of targets
            type: list
            elements: dict
            suboptions:
              name:
                description:
                  - The name associated to the target parameters
                  - This needs to match targetParams from the associated entry
                    in the SNMP_SERVER_TARGET list
                type: str
                required: true
              udp:
                description:
                  - UDP port
                type: dict
                suboptions:
                  ip:
                    description:
                      - IP address
                    type: str
                  port:
                    description:
                      - Port number
                    type: int
              tag:
                description:
                  - List of tag values used to select target addresses
                  - Tag values used to select target addresses
                  - Should be one of TrapNotify or InformNotif
                type: list
                elements: str
              timeout:
                description:
                  - Inform acknowledgement timeout period in seconds, range 1-300
                  - Needed only if this target can receive InformRequest-PDUs
                type: int
              retries:
                description:
                  - Number of retry attempts per inform, range 1-255
                  - Needed only if this target can receive InformRequest-PDUs
                type: int
              target_params:
                description:
                  - The name associated to the target parameters. This needs to match 
                    the name from the associated entry in the SNMP_SERVER_PARAMS list
                type: string
              source_interface:
                description:
                  - Source interface IP for sending SNMP traps
                type: str
          target_params:
            description:
              - List of target parameters
            type: list
            elements: dict
            suboptions:
              name:
                description:
                  -  Name of target parameter
                type: str
              v2c:
                description:
                  - SNMPv2c configuration
                type: dict:
                suboptions:
                  security_name:
                    description:
                      - Security name
                    type: str
              usm:
                description:
                  - USM configuration
                type: dict
                suboptions:
                  user_name:
                    description:
                      - Name of user
                    type: str
                  security_level:
                    description:
                      - The security level
                    type: str
                    choices:
                      - no-auth-no-priv
                      - auth-no-priv
                      - auth-priv
                    required: true
          communities:
            description:
              - List of communities
            type: list
            elements: dict
            suboptions:
              index:
                description:
                  - Index
                type: str
                required: true
              security_name:
                description:
                  - Security name
                type: str
          engine:
            description:
              - SNMP engine configuration
            type: dict
            suboptions:
              listen:
                description:
                  -  List of configurations for the transport endpoints on which the engine listens
                type: list
                elements: dict
                suboptions:
                  name:
                    description:
                      - Name of listen entry
                    type: str
                    required: true
                  udp:
                    description:
                      - UDP configuration
                    type: dict
                    suboptions:
                      ip:
                        description:
                          - IP address on which the engine listens
                        type: str
                      port:
                        description:
                          -  UDP port number on which the engine listens, range 1024-65535
                        type: int
                      interface:
                        description:
                          - Name of interface
                        type: str
              engine_id:
                description:
                  - The engine ID specified as a list of colon-specified
                    hexadecimal octets, e.g., '80:00:02:b8:04:61:62:63'
                  - The local SNMP engine's administratively assigned unique
                    identifier. If this leaf is not set, the device automatically
                    calculates an engine ID, as described in RFC 3411
                type: str
              interface_traps:
                description:
                  - List of interface traps
                type: list
                elements: dict
                suboptions:
                  ifname:
                    description:
                      - Interface name
                    type: str
                    required: true
                  trap_status:
                    description:
                      - Enable/disable traps on the interface
                    type: bool
          users:
            description:
              - List of users
            type: list
            elements: dict
            suboption:
              name:
                description:
                  - Name of user
                type: str
                required: true
              auth:
                description:
                  - User authentication configuration
                type: dict
                suboptions:
                  md5_key: 
                    description: 
                      - The presence of this key enables MD5 authentication for the user
                    type: str
                  sha_key:
                  description:
                    - The presence of this key enables SHA authentication for the user
                  type: str
               priv:
                description:
                  - Privacy configuration
                type: dict
                suboptions:
                  des_key:
                    description:
                      - The presence of this key enables DES encryption for the user
                    type: str
              encrypted:
                description:
                  - Enable/disable encryption
                type: bool       
          vacm:
            description:
              - VACM configuration
            type: dict
            suboptions:
              groups:
                description:
                  - List of VACM groups
                  - Groups are explicitly defined in this list. Group members are defined
                    in the 'member' list and access for the group is defined in the
                    'access' list
                type: list
                elements: dict
                suboptions:
                  name:
                    description:
                      - Name of the group
                    type: str
                    required: true
                  members:
                    description:
                      - List of members of the group
                      - A specific combination of securityName and securityModel MUST NOT be
                        present in more than one group
                    type: list
                    elements: dict
                    suboptions:
                      security_name:
                        description:
                          - The group this community is a member of. For communities with no
                            group association, securityName should be set to 'None'
                        type: str
                        required: true
                      security_model:
                        description:
                          - Security model used for user authentication
                        type: list
                        elements: str
                        choices:
                          - v2
                          - v3
                  access:
                    description:
                      - List of access rights configuration for groups
                    type: list
                    elements: dict
                    suboptions:
                      context:
                        description:
                          - Context under which access rights apply
                        type: str
                        required: true
                      security_model:
                        description:
                          - Security model used for user authentication
                        type: str
                        required: true
                      security_level:
                        description:
                          - Minimum security level under which the access rights apply
                        type: str
                        required: true
                        choices:
                          - no-auth-no-priv
                          - auth-no-priv
                          - auth-priv
                      read_view:
                        description:
                          - Name of the read view
                        type: str
                      write_view:
                        description:
                          - The name of the MIB view authorizing write access
                          - As the MIBs are currently read-only, the value of this view-name is immaterial
                        type: str
                      notify_view:
                        description:
                          - Name of the notify view
                        type: str  
              views:
                description:
                  - List of views
                type: list
                elements: dict
                suboptions:
                  name:
                    description:
                      - Name of the view
                    type: str
                    required: true
                  include:
                    description:
                      - List of subtrees included in the view
                    type: list
                    elements: str
                  exclude:
                    description:
                      - A list of subtrees excluded in this MIB view
                    type: list
                    elements: str
          system:
            description:
              - System configuration
            type: dict
            suboptions:
              contact:
                description:
                  - Description of the system contact information
                type: str
              location:
                description:
                  - Description of the system location information
                type: str
              trap_enable:
                description:
                  - Enable/disable trap
                type: bool
              notifications:
                description:
                  - Notifications configuration
                type: dict
                suboptions:
                  authentication_failure_trap:
                    description:
                      - Enable/disable authentication failure trap, This is valid only if 'traps' field is
                        disabled or not configured
                    type: bool
                  link_down_trap:
                    description:
                      - Enable/disable link down trap, This is valid only if 'traps' field is
                        disabled or not configured
                    type: bool
                  link_up_trap:
                    description:
                      - Enable/disable link-up trap, This is valid only if 'traps' field is
                        disabled or not configured
                    type: bool
                  config_change_trap:
                    description:
                      - Enable/disable configure change trap, This is valid only if 'traps' field is
                        disabled or not configured
                    type: bool
                  ospf_traps:
                    description:
                      - Enable/disable OSPF module traps, This is valid only if 'traps' field is
                        disabled or not configured
                  bgp_traps:
                    description:
                      - Enable/disable BGP module traps, This is valid only if 'traps' field is
                        disabled or not configured
                    type: bool
      state:
        description:
          - The state of the configuration after module completion
        type: str
        choices: ['merged', 'deleted', 'replaced', 'overridden']
        default: merged
EXAMPLES: